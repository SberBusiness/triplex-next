@import 'src/styles/style';

@sideOverlayBorderRadius: 32px;
@sideOverlayBorderRadiusMobile: 16px;

.lightBoxSideOverlayMask {
    transition: opacity 0.6s;
    background-color: var(--triplex-next-LightBox-Backdrop_Background);
}

.lightBoxSideOverlayWrapper {
    position: fixed;
    min-height: calc(100% - var(--lightBox-screen-top));
    top: var(--lightBox-screen-top);
    left: 0; 
    width: 0;
    z-index: @z-index-step * 2;
    overflow-y: auto;
    // Чтобы элементы оверлея не получали фокус, когда он скрыт.
    visibility: hidden;

    &.overflowXHidden {
        overflow-x: hidden;
    }

    &.overflowYHidden {
        overflow-y: hidden;
    }

    &.closing,
    &.opened {
        visibility: visible;
        left: var(--lightBox-screen-left);
        width: var(--lightBox-screen-width);
        right: auto;
    }

    &.closing {
        pointer-events: none;
    }

    .global-page {
        max-width: @lightBox-content-max-width;
        padding-top: 24px; // Переопределение отступов Page.module.less
        padding-bottom: 24px; // Переопределение отступов Page.module.less

        @media (max-width: @screen-sm-max) {
            & {
                padding: @page-padding-mobile-y @page-padding-mobile-x;
            }
        }
    }

    .lightBoxSideOverlayContent {
        position: relative;
        transform: translateY(100%);
        transition: transform 0.6s;
        border-top-left-radius: @sideOverlayBorderRadius;
        border-top-right-radius: @sideOverlayBorderRadius;
        background-color: var(--triplex-next-LightBox-Content_Background);

        width: 1100px;
        max-width: calc(100% - 32px);
        margin: 16px auto 0;
        display: flex;
        justify-content: center;


        &.opened {
            // Убирается контекст для вложенных элементов с position: fixed.
            transform: none;
        }

        &.opening {
            transform: translateY(0);
        }
    }

    &.sizeSM .global-page {
        width: @sideOverlaySMWidth;
        // На мобильном устройстве, ширина не более ширины экрана.
        max-width: 100%;
    }

    &.sizeMD .global-page {
        width: @sideOverlayMDWidth;
        // На мобильном устройстве, ширина не более ширины экрана.
        max-width: 100%;
    }

    &.sizeLG .global-page {
        width: @sideOverlayLGWidth;
        // На мобильном устройстве, ширина не более ширины экрана.
        max-width: 100%;
    }

    .lightBoxSideOverlayBase {
        overflow: visible;
        bottom: auto;
        height: 100%;
    }

    @media (max-width: @screen-sm-max) {
        .lightBoxSideOverlayContent {
            margin-top: 28px;
            max-width: 100%;
            border-top-left-radius: @sideOverlayBorderRadiusMobile;
            border-top-right-radius: @sideOverlayBorderRadiusMobile;
        }

        // На мобильных устройствах блок с кнопкой закрыть не должен уезжать на вторую строку.
        .global-HeaderTitleControls {
            position: absolute;
            top: 0;
            right: 0;
        }

        .global-HeaderTitleContent {
            // На мобильных устройствах отступ справа, чтобы не наезжать на кнопку закрыть.
            padding-right: 40px !important;
        }
    }
}

.lightBoxSideOverlay {
    display: flex;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    min-height: 100%;

    &.closing,
    &.opening {
        overflow-x: hidden;
    }
}