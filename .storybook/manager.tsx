import { addons } from "storybook/manager-api";
import { themes } from "storybook/theming";

const getBrandTitle = (color: string) => `
    <svg width="120" viewBox="0 0 229 118" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M77.6628 5.32545C90.8538 -3.85255 108.962 -0.862547 118.485 11.9468L118.927 12.5621L141.909 45.6515C141.935 45.6948 141.979 45.7468 142.005 45.7901C142.195 46.0935 142.308 46.4488 142.308 46.8301C142.308 47.9135 141.424 48.7975 140.331 48.7975C139.672 48.7975 139.082 48.4768 138.726 47.9828L115.692 14.8155C107.557 3.26279 91.5476 0.463452 79.9264 8.54945L78.851 9.29478C67.2297 17.3808 64.4025 33.3015 72.5373 44.8541L113.333 102.765C117.947 109.308 125.093 113.043 132.534 113.581C132.569 113.581 132.664 113.589 132.69 113.589C133.497 113.685 134.156 114.257 134.373 115.011C134.416 115.184 134.442 115.357 134.442 115.548C134.442 116.51 133.74 117.316 132.82 117.481C132.725 117.489 132.578 117.507 132.482 117.515C132.387 117.507 132.265 117.498 132.161 117.489C123.61 116.857 115.397 112.549 110.098 105.009L69.3025 47.1075C59.9188 33.7781 63.1796 15.4135 76.5788 6.07945L77.6628 5.32545ZM54.5331 105.573C45.0193 118.382 26.911 121.372 13.7113 112.185L12.6359 111.44C-0.771867 102.106 -4.03275 83.7415 5.35964 70.4121L46.1467 12.5015C51.4543 4.97012 59.6586 0.662785 68.2184 0.0301188C68.3138 0.0214521 68.4352 0.0127853 68.5393 0.00411861C68.6347 0.0127853 68.7734 0.0214521 68.8688 0.0301188C69.7968 0.203452 70.4993 1.00079 70.4993 1.97145C70.4993 2.15345 70.4733 2.33545 70.4212 2.50012C70.2131 3.26279 69.554 3.83478 68.7474 3.93012C68.7127 3.93012 68.6173 3.93879 68.5913 3.93879C61.1416 4.46745 53.9954 8.20279 49.3816 14.7548L8.5945 72.6655C0.459637 84.2181 3.27822 100.13 14.8995 108.216L15.9749 108.97C27.5961 117.056 43.6057 114.248 51.7405 102.704L74.7749 69.5368C75.1304 69.0428 75.7202 68.7221 76.3793 68.7221C77.472 68.7221 78.3566 69.5975 78.3566 70.6895C78.3566 71.0708 78.2439 71.4261 78.0531 71.7295C78.0271 71.7641 77.9924 71.8161 77.9664 71.8508L54.9754 104.957L54.5331 105.573ZM215.236 5.62012C201.828 -3.71388 183.355 -0.472548 173.972 12.8568L133.176 70.7588C123.792 84.0881 127.053 102.453 140.452 111.787L141.536 112.541C154.935 121.866 173.417 118.633 182.8 105.304L223.587 47.3935C232.98 34.0728 229.719 15.6995 216.311 6.37412L215.236 5.62012ZM212.972 8.83545C201.351 0.749452 185.341 3.55745 177.207 15.1101L136.411 73.0121C128.276 84.5648 131.103 100.485 142.724 108.571L143.8 109.317C155.421 117.403 171.431 114.603 179.565 103.051L220.353 45.1401C228.487 33.5961 225.669 17.6755 214.048 9.58945L212.972 8.83545ZM87.1333 10.0661C86.9425 9.89279 86.8211 9.63279 86.8211 9.35545C86.8211 9.24279 86.8384 9.14745 86.8644 9.05212C86.9945 8.65345 87.3674 8.36745 87.8097 8.36745C87.8965 8.36745 87.9745 8.37612 88.0526 8.39345C88.1566 8.41945 88.2607 8.46278 88.3474 8.52345C88.3821 8.54945 88.4168 8.57545 88.4515 8.60145C100.402 17.7968 103.247 34.6795 94.8519 47.2548L94.4356 47.8701L87.4021 58.0188C87.22 58.2528 86.8731 58.4868 86.5522 58.4868C86.4742 58.4868 86.4048 58.4781 86.3354 58.4695C85.8931 58.3655 85.5635 57.9755 85.5635 57.5075C85.5635 57.4641 85.5635 57.4208 85.5722 57.3861C85.5809 57.2561 85.6242 57.1435 85.685 57.0308C85.7196 56.9701 85.7543 56.9181 85.7977 56.8661L92.8138 46.7435C101.079 35.0175 98.5811 19.0015 87.3848 10.2655C87.298 10.2048 87.2113 10.1441 87.1333 10.0661ZM150.651 58.9981C150.469 58.7815 150.191 58.6428 149.888 58.6428C149.342 58.6428 148.899 59.0848 148.899 59.6308C148.899 59.8128 148.951 59.9861 149.038 60.1334C149.064 60.1768 149.09 60.2114 149.125 60.2548L157.086 71.5388C165.386 83.3255 162.932 99.2808 151.596 107.982C151.544 108.017 151.492 108.06 151.44 108.103C151.25 108.285 151.128 108.545 151.128 108.823C151.128 109.213 151.406 109.568 151.727 109.733C151.848 109.785 151.978 109.811 152.117 109.811C152.316 109.811 152.507 109.75 152.663 109.655C152.707 109.62 152.741 109.594 152.785 109.559C164.77 100.373 167.528 83.6288 159.124 71.0275L158.699 70.4121L150.747 59.1368C150.721 59.0848 150.686 59.0415 150.651 58.9981Z" fill="${color}"/>
    </svg>
    <br />
    <br />
    @sberbusiness/triplex-next <br /> v${__TRIPLEX_VERSION__} (${__TRIPLEX_VERSION__.startsWith("1.") ? "React 18" : "React 17"})
`;

addons.setConfig({
    theme: {
        ...themes.light,
        brandTitle: getBrandTitle("#000"),
    },
});

addons.ready().then(() => {
    const channel = addons.getChannel();

    channel.on("globalsUpdated", ({ globals }) => {
        const theme = globals.theme === "dark" ? themes.dark : themes.light;
        addons.setConfig({
            theme: {
                ...theme,
                brandTitle: globals.theme === "dark" ? getBrandTitle("#fff") : getBrandTitle("#000"),
            },
        });
    });
});
